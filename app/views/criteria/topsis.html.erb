<%- model_class = Criterium -%>

<div class="page-header">
  <h1><%= "Proses Seleksi #{@grup.posisi.split.map(&:capitalize).join(' ')}" %></h1>
  <p><%= link_to 'Kembali Kehalaman Kriteria', criteria_path, class: "btn btn-primary" %></p>
	<% if @criteria.count < 5 %>
	  <p><%= link_to 'Tambah Data Baru',
	            new_criterium_path,
	            :class => 'btn btn-primary' %></p>
	<% end %>
</div>
<!-- <table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:member_id) %></th>
      <th><%= model_class.human_attribute_name(:group_id) %></th>
      <th><%= model_class.human_attribute_name(:tinggi_badan) %></th>
      <th><%= model_class.human_attribute_name(:berat_badan) %></th>
      <th><%= model_class.human_attribute_name(:kecepatan_berlari) %></th>
      <th><%= model_class.human_attribute_name(:akurasi_tendangan) %></th>
      <th><%= model_class.human_attribute_name(:prestasi) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @kriteria.each do |criterium| %>
      <tr>
        <td><%= link_to criterium.id, criterium_path(criterium) %></td>
        <td>
          <%= 
            member = Member.find(criterium.member_id)
            member.nama
          %>
        </td>
        <td>
          <%= 
            grup = Group.find(criterium.group_id)
            grup.posisi
          %>
        </td>
        <td><%= criterium.tinggi_badan %></td>
        <td><%= criterium.berat_badan %></td>
        <td><%= criterium.kecepatan_berlari %></td>
        <td><%= criterium.akurasi_tendangan %></td>
        <td><%= criterium.prestasi %></td>
        <td><%=l criterium.created_at %></td>
        <td>
        <% if coach_signed_in? && current_coach.role == 'Asisten Pelatih' %>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_criterium_path(criterium), :class => 'btn btn-default btn-xs' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      criterium_path(criterium),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-xs btn-danger' %>
				<% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table> -->


<% if @criteria.count == 5 %>
<table class="table table-striped">
	<tr>
		<td></td>
		<td>Tinggi Badan</td>
		<td>Berat Badan</td>
		<td>Kecepatan Berlari</td>
		<td>Akurasi Tendangan</td>
		<td>Prestasi</td>
	</tr>
	<tr>
		<td><%= @a1 %></td>
		<td><%= @a1c1 %></td>
		<td><%= @a1c2 %></td>
		<td><%= @a1c3 %></td>
		<td><%= @a1c4 %></td>
		<td><%= @a1c5 %></td>
	</tr>
	<tr>
		<td><%= @a2 %></td>
		<td><%= @a1c2 %></td>
		<td><%= @a1c2 %></td>
		<td><%= @a1c2 %></td>
		<td><%= @a1c2 %></td>
		<td><%= @a1c2 %></td>
	</tr>
	<tr>
		<td><%= @a3 %></td>
		<td><%= @a1c3 %></td>
		<td><%= @a1c3 %></td>
		<td><%= @a1c3 %></td>
		<td><%= @a1c3 %></td>
		<td><%= @a1c3 %></td>
	</tr>
	<tr>
		<td><%= @a4 %></td>
		<td><%= @a1c4 %></td>
		<td><%= @a1c4 %></td>
		<td><%= @a1c4 %></td>
		<td><%= @a1c4 %></td>
		<td><%= @a1c4 %></td>
	</tr>
	<tr>
		<td><%= @a5 %></td>
		<td><%= @a1c5 %></td>
		<td><%= @a1c5 %></td>
		<td><%= @a1c5 %></td>
		<td><%= @a1c5 %></td>
		<td><%= @a1c5 %></td>
	</tr>
</table>

<table class="table table-striped">
	<tr>
		<td></td>
		<td>R &nbsp;&nbsp;</td>
		<td>Y <sup>-</sup></td>
		<td>Y <sup>+</sup></td>
		<td>D <sup>-</sup></td>
		<td>D <sup>+</sup></td>
		<td><b>V &nbsp;&nbsp;</b></td>
	</tr>
	<tr>
		<td><%= @a1 %></td>
		<td><%= @jumlahPangkatC1.round(8) %></td>
		<td><%= @y1.round(8) %></td>
		<td><%= @y1m.round(8) %></td>
		<td><%= @d1.round(8) %></td>
		<td><%= @d1m.round(8) %></td>
		<td><%= @v1.round(8) %></td>
	</tr>
	<tr>
		<td><%= @a2 %></td>
		<td><%= @jumlahPangkatC2.round(8) %></td>
		<td><%= @y2.round(8) %></td>
		<td><%= @y2m.round(8) %></td>
		<td><%= @d2.round(8) %></td>
		<td><%= @d2m.round(8) %></td>
		<td><%= @v2.round(8) %></td>
	</tr>
	<tr>
		<td><%= @a3 %></td>
		<td><%= @jumlahPangkatC3.round(8) %></td>
		<td><%= @y3.round(8) %></td>
		<td><%= @y3m.round(8) %></td>
		<td><%= @d3.round(8) %></td>
		<td><%= @d3m.round(8) %></td>
		<td><%= @v3.round(8) %></td>
	</tr>
	<tr>
		<td><%= @a4 %></td>
		<td><%= @jumlahPangkatC4.round(8) %></td>
		<td><%= @y4.round(8) %></td>
		<td><%= @y4m.round(8) %></td>
		<td><%= @d4.round(8) %></td>
		<td><%= @d4m.round(8) %></td>
		<td><%= @v4.round(8) %></td>
	</tr>
	<tr>
		<td><%= @a5 %></td>
		<td><%= @jumlahPangkatC5.round(8) %></td>
		<td><%= @y5.round(8) %></td>
		<td><%= @y5m.round(8) %></td>
		<td><%= @d5.round(8) %></td>
		<td><%= @d5m.round(8) %></td>
		<td><%= @v5.round(8) %></td>
	</tr>
</table>

	<br><br>

	<table class="table table-bordered">
		<tr class="success">
			<td class="success"><h3><b>Ranking</b></h3></td>
			<td class="success"><h3><b>Nama</b></h3></td>
			<td class="success"><h3><b>Posisi</b></h3></td>
			<td class="success"><h3><b>Nilai</b></h3></td>
			<td class="success"><h3><b>Action</b></h3></td>
		</tr class="success">
			<% @i = 1 %>
			<% @rank.each do |nama, nilai| %>
				<% @data = Member.find_by(nama: nama) %>
						<%= form_for @rekap_datum, :html => { :class => "form-horizontal rekap_datum" } do |f| %>

					  <% if @rekap_datum.errors.any? %>
					    <div id="error_expl" class="panel panel-danger">
					      <div class="panel-heading">
					        <h3 class="panel-title"><%= pluralize(@rekap_datum.errors.count, "error") %> prohibited this rekap_datum from being saved:</h3>
					      </div>
					      <div class="panel-body">
					        <ul>
					        <% @rekap_datum.errors.full_messages.each do |msg| %>
					          <li><%= msg %></li>
					        <% end %>
					        </ul>
					      </div>
					    </div>
					  <% end %>

				<tr>
					<td class="success"><b><%= f.text_field :ranking, value: @i, readonly: true %></b></td>
					<td class="success"><b><%= f.text_field :nama, value: nama, readonly: true %></b></td>
					<b><%= f.hidden_field :tanggal_lahir, value: @data.tanggal_lahir, readonly: true %></b>
					<b><%= f.hidden_field :alamat, value: @data.alamat, readonly: true %></b>
					<b><%= f.hidden_field :handphone, value: @data.handphone, readonly: true %></b>
					<td class="success"><b><%= f.text_field :posisi, value: @grup.posisi.split.map(&:capitalize).join(' '), readonly: true %></b></td>
					<td class="success"><b><%= f.text_field :nilai, value: nilai, readonly: true %></b></td>
					<td class="success"><b><%= f.submit 'Masukan ke Rekap Data', :class => 'btn btn-primary' %></b></td>
				</tr>
					<% end %>

				<!-- <tr>
					<td class="success"><b><%= @i %></b></td>
					<td class="success"><b><%= nama %></b></td>
					<td class="success"><b><%= @data.tanggal_lahir %></b></td>
					<td class="success"><b><%= @data.alamat %></b></td>
					<td class="success"><b><%= @data.handphone %></b></td>
					<td class="success"><b><%= @grup.posisi.split.map(&:capitalize).join(' ') %></b></td>
					<td class="success"><b><%= nilai %></b></td>
					<td class="success"><b><%= '-' %></b></td>
				</tr> -->
			<% @i += 1 %>
			<% end %>
	</table>
<% end %>

<br><br><br>